<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360° Dungeon Art Gallery with Custom Background</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@6.1.1/dist/aframe-extras.controls.min.js"></script>
    <style>
      body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      .loading-screen {
        position: absolute;
        width: 100%;
        height: 100%;
        background: url('images/dungeon.png') no-repeat center center;
        background-size: cover;
        color: #FFD700;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        z-index: 9999;
      }
      .scene-container {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
      Loading...
    </div>

    <!-- Main A-Frame Scene -->
    <div id="sceneContainer" class="scene-container">
      <a-scene vr-mode-ui="enabled: false" renderer="antialias: true; colorManagement: true; maxCanvasWidth: 1920; maxCanvasHeight: 1080">
        <!-- Asset Management System -->
        <a-assets>
          <!-- Define Image Assets for Gallery -->
          <img id="art1" src="images/IMG_2541.PNG">
          <img id="art2" src="images/IMG_2550.PNG">
          <img id="art3" src="images/IMG_2553.PNG">
          <img id="art4" src="images/IMG_2558.PNG">
          <img id="art5" src="images/IMG_2568.PNG">
          <img id="art6" src="images/IMG_3402.PNG">
          <img id="art7" src="images/nft_fb6056e4-89e5-456b-a9b9-e8bd5f2c0fff.png">
          <img id="art8" src="images/nft_ffd4e5aa-8a6f-4b63-832d-140bf21e1229.png">
          <img id="art9" src="images/maskartist.jpg">
          <img id="art10" src="images/IMG_2568.PNG">
          <img id="frame" src="images/4.png"> <!-- Frame Image for All Art Images -->

          <!-- Define Textures for Dungeon -->
          <img id="leftWallTexture" src="images/dungeonleftwall.png">
          <img id="rightWallTexture" src="images/dungeonrightwall.png">
          <img id="backWallTexture" src="images/dungeonwall.png">
          <img id="floorTexture" src="images/dungeonfloor.png">
          <img id="ceilingTexture" src="images/dungeonceiling.png">
          <img id="backgroundTexture" src="images/dungeon.png">
           
          <!-- Define Sound Asset -->
          <audio id="scream" src="audio/scream.mp3"></audio>
          <audio id="scream" src="audio/scream2.mp3"></audio>
        </a-assets>

        <!-- Custom Background Image -->
        <a-sky src="#backgroundTexture" rotation="0 -90 0"></a-sky>

        <!-- Expanded 360° Environment with Textured Walls, Floor, and Ceiling -->
        <a-plane position="-5 2.5 0" rotation="0 90 0" width="10" height="5" material="src: #leftWallTexture; repeat: 1 1;"></a-plane>
        <a-plane position="5 2.5 0" rotation="0 -90 0" width="10" height="5" material="src: #rightWallTexture; repeat: 1 1;"></a-plane>
        <a-plane position="0 2.5 -5" rotation="0 0 0" width="10" height="5" material="src: #backWallTexture; repeat: 1 1;"></a-plane>
        <a-plane position="0 2.5 5" rotation="0 180 0" width="10" height="5" material="src: #backWallTexture; repeat: 1 1;"></a-plane>

        <!-- Floor and Ceiling -->
        <a-plane position="0 0 0" rotation="-90 0 0" width="20" height="20" material="src: #floorTexture; repeat: 2 2;"></a-plane>
        <a-plane position="0 5 0" rotation="90 0 0" width="20" height="20" material="src: #ceilingTexture; repeat: 2 2;"></a-plane>

        <!-- Position Art Images on Walls with Frames -->
        <a-plane position="-4.5 2 0.05" rotation="0 90 0" width="3.3" height="3.3" material="src: #frame; transparent: true"></a-plane>
        <a-plane position="-4.5 2 0.1" rotation="0 90 0" width="2" height="2" material="src: #art1" class="clickable"></a-plane>
        <a-plane position="4.5 2 0.05" rotation="0 -90 0" width="3.3" height="3.3" material="src: #frame; transparent: true"></a-plane>
        <a-plane position="4.5 2 0.1" rotation="0 -90 0" width="2" height="2" material="src: #art2" class="clickable"></a-plane>
        <a-plane position="0 2 -4.85" width="3.3" height="3.3" material="src: #frame; transparent: true"></a-plane>
        <a-plane position="0 2 -4.8" width="2" height="2" material="src: #art3" class="clickable"></a-plane>
        <a-plane position="0 2 4.85" rotation="0 180 0" width="3.3" height="3.3" material="src: #frame; transparent: true"></a-plane>
        <a-plane position="0 2 4.8" rotation="0 180 0" width="2" height="2" material="src: #art4" class="clickable"></a-plane>

        <a-entity position="0 1.5 3" rotation="0 210 0">
          <a-plane width="2" height="1.2" color="#ff3333" class="clickable"
                    event-set__mouseenter="scale: 1.1 1.1 1.1"
                    event-set__mouseleave="scale: 1 1 1"
                    onclick="window.location.href='index.html';">
            <a-text value="This is too scary, get me out of here!"
                    color="#FFD700"
                    align="center"
                    position="0 0 0.1"
                    scale="1.2 1.2 1.2"></a-text>
          </a-plane>
        </a-entity>
        
            


        <!-- Mobile-Optimized Torchlight Effect -->
        <a-entity camera look-controls position="0 1.6 0" touch-controls>
          <a-entity light="type: spot; color: #ffffff; intensity: 1; angle: 40; penumbra: 0.7; distance: 15; decay: 1.5" position="0 0 -0.5"></a-entity>
          <a-cursor color="white"></a-cursor>
        </a-entity>
      </a-scene>
    </div>

    <script>
      // Function to detect mobile devices
      function isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      }
    
      // Show scene and hide loading screen after 5-second delay
      setTimeout(() => {
        // Hide the loading screen and show the main scene container
        document.getElementById('loadingScreen').style.display = 'none';
        document.getElementById('sceneContainer').style.display = 'block';
    
        // Play the scream sounds when the scene loads
        const screamSound1 = document.getElementById('scream');  // First scream sound
        const screamSound2 = document.getElementById('scream2'); // Second scream sound
    
        if (isMobile()) {
          // If on mobile, add a touch listener to play sound
          document.addEventListener('touchstart', () => {
            screamSound1.play();
            screamSound2.play();
          }, { once: true });
        } else {
          // For desktop, play sound directly
          screamSound1.play().catch(() => {
            document.addEventListener('click', () => {
              screamSound1.play();
            }, { once: true });
          });
    
          screamSound2.play().catch(() => {
            document.addEventListener('click', () => {
              screamSound2.play();
            }, { once: true });
          });
        }
      }, 5000);
    </script>
    
    
    
  </body>
</html>
